# AceFlow v3.0 SPEC 核心摘要

> 📖 **来源**: aceflow/aceflow-spec_v3.0.md  
> 🎯 **目的**: 为AI Agent提供快速SPEC参考  
> 🔄 **更新**: 与主SPEC文档保持同步

## 🏗️ 核心架构原则

### 系统分层
- **用户界面层**: CLI工具、Web界面、IDE扩展
- **核心引擎层**: AceFlow引擎、AI决策引擎、状态管理器、记忆池
- **数据存储层**: 项目状态、工作流模板、历史记录

### 核心理念
- **智能自适应**: AI根据任务特征自动选择最优执行路径
- **状态驱动**: 基于项目状态和上下文进行工作流管理
- **分层架构**: 系统规范、AI执行、实战模板三层分离
- **标准化**: 统一的文件格式、路径规范和输出标准

## 🔄 工作流模式

### 1. Minimal模式 (P→D→R)
- **适用**: 快速原型、概念验证、紧急修复
- **阶段**: Planning → Development → Review
- **时长**: 4-8小时
- **输出**: 基本功能实现

### 2. Standard模式 (P1→P2→D1→D2→R1)
- **适用**: 常规功能开发、中等复杂度项目
- **阶段**: 需求分析 → 技术设计 → 核心实现 → 测试验证 → 代码审查
- **时长**: 2-5天
- **输出**: 完整功能模块

### 3. Complete模式 (S1→S8)
- **适用**: 大型项目、企业级开发
- **阶段**: 8个完整阶段
- **时长**: 1-4周
- **输出**: 企业级解决方案

### 4. Smart模式 (AI自适应)
- **适用**: 复杂多变的项目需求
- **特点**: AI动态调整流程
- **阶段**: 根据项目特征智能选择
- **输出**: 最优化的开发流程

## 📁 标准化目录结构

```
.aceflow/
├── config/
│   ├── project.yaml          # 项目配置
│   └── workflow.yaml         # 工作流配置
├── state/
│   ├── project_state.json    # 项目状态
│   └── stage_progress.json   # 阶段进度
├── memory/
│   ├── requirements/         # 需求记忆
│   ├── decisions/           # 决策记忆
│   └── patterns/            # 模式记忆
└── templates/
    ├── minimal/             # 最小模式模板
    ├── standard/            # 标准模式模板
    └── complete/            # 完整模式模板

aceflow-result/
├── iter_{timestamp}/
│   ├── {mode}_{stage}/
│   │   ├── deliverables/
│   │   └── artifacts/
│   └── summary.md
```

## 🚦 决策门控制

### 决策门类型
- **DG1**: 需求完整性检查
- **DG2**: 设计可行性验证
- **DG3**: 实现质量评估
- **DG4**: 测试覆盖度检查
- **DG5**: 发布准备验证

### 质量标准
- **代码覆盖率**: ≥80%
- **文档完整性**: 必须包含README、API文档
- **测试通过率**: 100%
- **性能基准**: 满足预定义指标

## 🧠 AI决策引擎规则

### 模式选择逻辑
```
if (task_complexity == "low" && urgency == "high"):
    return "minimal"
elif (task_complexity == "medium" && team_size <= 3):
    return "standard"
elif (task_complexity == "high" || team_size > 3):
    return "complete"
else:
    return "smart"  # AI自适应选择
```

### 状态转换规则
- 每个阶段必须通过对应的决策门才能进入下一阶段
- 发现阻塞问题时，自动回退到上一个稳定状态
- 紧急情况下，可以启用快速通道（需要明确授权）

## 📊 关键指标

### 项目健康度指标
- **进度符合度**: 实际进度 vs 计划进度
- **质量分数**: 代码质量、测试覆盖率、文档完整性综合评分
- **风险等级**: 基于技术债务、依赖复杂度等因素评估

### 团队效能指标
- **交付速度**: 功能点/天
- **缺陷率**: 缺陷数/功能点
- **返工率**: 返工时间/总开发时间

## ⚠️ 关键约束

### 必须遵循的规则
1. **状态一致性**: 所有状态变更必须记录在project_state.json中
2. **输出标准化**: 所有交付物必须放在aceflow-result目录下
3. **决策门强制**: 不能跳过任何决策门检查
4. **记忆更新**: 重要决策和学习必须存储到memory目录
5. **模板遵循**: 必须使用标准模板生成文档

### 异常处理
- **状态不一致**: 自动修复或回退到最近的一致状态
- **决策门失败**: 提供具体的失败原因和修复建议
- **资源不足**: 自动降级到更简单的工作流模式

## 🔧 工具集成

### 必需工具
- **Git**: 版本控制
- **Docker**: 容器化部署
- **测试框架**: 根据技术栈选择
- **CI/CD**: GitHub Actions、Jenkins等

### 推荐工具
- **代码质量**: SonarQube、CodeClimate
- **文档生成**: Sphinx、GitBook
- **监控**: Prometheus、Grafana

---

**重要提醒**: 本摘要是SPEC文档的精简版本，详细信息请参考完整的aceflow-spec_v3.0.md文档。