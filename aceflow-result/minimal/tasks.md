# Minimal模式开发任务清单

## 任务1：用户认证模块 (预计1.5天)
### 功能描述
- 用户注册功能（用户名+密码，邮箱为可选字段）
- 用户登录与JWT签发
- 登录状态维护
- 密码加密存储

### 验收标准
- [x] POST /auth/register 可创建新用户
- [x] POST /auth/login 返回有效JWT
- [x] 登录流程可保存Token
- [x] 注册后自动登录并保存Token
- [x] 密码加密存储，确保安全性

### 关联文件
- `src/auth/`
  - register.vue
  - login.vue
- `api/auth.py`

---

## ✅ 任务1：用户认证模块 (已完成核心功能)
### 剩余工作
- 前端Token存储集成

## 🚀 任务2：基础任务管理 (已完成，预计2天)
### 功能描述
- 任务创建与列表展示
- 任务编辑与删除
- 状态变更功能
- 任务数据隔离（用户只能访问自己的任务）
- 支持任务字段：标题、描述(Markdown)、截止时间、优先级(高/中/低)、状态(待办/进行中/已完成)

### 验收标准
- [x] GET /tasks 返回当前用户任务列表
- [x] POST /tasks 可创建新任务
- [x] 前端表格可展示任务基础字段
- [x] 用户只能查看和操作自己的任务
- [x] 任务字段包含标题、描述(Markdown)、截止时间、优先级、状态
- [x] 支持任务的增删改查操作

### 关联文件
- `src/tasks/`
  - TaskList.vue
  - TaskForm.vue
- `api/tasks.py`

---

## 任务3：提醒功能 (已完成，预计1天)
### 功能描述
- 浏览器基础通知（右下角弹窗）
- 定时检测到期任务
- 简单的提醒记录
- 防重复提醒机制
- 仅对状态为"待办"或"进行中"的任务提醒

### 验收标准
- [x] 任务到期前30分钟触发通知
- [x] 点击通知跳转到对应任务
- [x] 避免重复提醒
- [x] 仅对状态为"待办"或"进行中"的任务提醒
- [x] 通知弹窗可自动消失（5-10秒）

### 关联文件
- `src/services/notifier.js`
- `api/reminders.py`

---

## 任务4：数据持久化 (已完成，预计0.5天)
### 功能描述
- DuckDB数据库初始化
- 用户表与任务表结构
- 基础CRUD操作
- 数据隔离实现
- 用户表包含字段：id, username, password_hash, email, avatar, created_at
- 任务表包含字段：id, user_id, title, description, due_date, priority, status, created_at, notified

### 验收标准
- [x] 启动时自动创建database.db
- [x] 用户数据可持久化
- [x] 任务操作无数据丢失
- [x] 任务数据按用户隔离存储
- [x] 数据库表结构符合PRD要求

### 关联文件
- `models/`
  - user.py
  - task.py
- `database.py`

---

## 任务5：界面优化与设置功能 (已完成，预计1天)
### 功能描述
- 实现看板视图（按状态分组，支持拖拽）
- 添加设置页面
- 实现提醒时间设置功能
- 实现数据导出功能（CSV/JSON格式）
- 界面风格参考Notion设计

### 验收标准
- [x] 支持列表视图和看板视图切换
- [x] 可在设置页面配置提醒提前时间
- [x] 支持导出个人任务数据(CSV/JSON格式)
- [x] 看板视图支持拖拽更改任务状态
- [x] 界面符合Notion风格设计（白色/浅灰背景，圆角按钮）
- [x] 优先级颜色：高（红色）、中（黄色）、低（绿色）
- [x] 状态颜色：待办（灰色）、进行中（蓝色）、已完成（绿色）

### 关联文件
- `src/views/Tasks.vue`
- `src/components/TaskBoard.vue`
- `src/views/Settings.vue`
- `api/export.py`

---

## 任务6：测试与优化 (已完成，预计1天)
### 功能描述
- 功能测试
- 性能优化
- 安全性检查
- 用户体验优化

### 验收标准
- [x] 所有功能模块通过测试
- [x] API响应时间 < 200ms
- [x] 通知延迟 < 1分钟
- [x] 界面响应流畅，符合Notion风格设计
- [x] 所有数据操作均需用户登录，严格校验用户身份

### 关联文件
- `tests/`
- `src/components/`
- `api/`

---

## 任务7：完善用户认证页面导航 (已完成，预计0.5天)
### 功能描述
- 在登录页面添加跳转到注册页面的链接
- 在注册页面添加跳转到登录页面的链接

### 验收标准
- [x] 用户可以在登录页面点击链接跳转到注册页面
- [x] 用户可以在注册页面点击链接跳转到登录页面
- [x] 页面导航链接样式符合整体设计风格

### 关联文件
- `src/auth/login.vue`
- `src/auth/register.vue`

---

## 任务8：注册页面添加邮箱字段支持 (已完成，预计1天)
### 功能描述
- 在注册页面添加邮箱输入框（可选字段）
- 更新后端API以支持邮箱字段的处理和存储
- 确保邮箱字段在用户模型中正确处理

### 验收标准
- [x] 注册页面包含邮箱输入框
- [x] 邮箱字段为可选输入
- [x] 后端API能正确接收和存储邮箱字段
- [x] 用户模型能正确处理邮箱字段
- [x] 邮箱字段在数据库中正确存储

### 关联文件
- `src/auth/register.vue`
- `api/auth.py`
- `models/user.py`

---

## 任务9：修复JWT Token认证问题 (已完成，预计0.5天)
### 功能描述
- 解决前端请求未携带JWT Token导致401错误的问题
- 创建统一的axios配置，自动添加JWT Token到请求头
- 更新所有API调用组件使用新的axios配置

### 验收标准
- [x] 前端请求自动携带JWT Token
- [x] 用户注册登录后能正常访问受保护的API
- [x] 所有API调用组件使用统一的认证机制

### 关联文件
- `src/config/axios.js`
- `src/auth/login.vue`
- `src/auth/register.vue`
- `src/views/Tasks.vue`
- `src/views/Settings.vue`
- `src/services/notifier.js`