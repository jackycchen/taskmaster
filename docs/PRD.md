多用户隔离个人任务管理系统 PRD

1. 产品概述

1.1 背景
在小团队、家庭或组织中，成员各自有独立的任务管理需求。现有协作型任务管理系统过于复杂，个人需求难以满足，且会增加学习和维护成本。为此，需开发一套支持**多用户登录、数据互相隔离**的个人任务管理系统，确保每位用户只管理和查看自己的任务，无协作、共享、分配等复杂场景。

1.2 目标
- 多用户支持：允许多个用户注册和登录，提供独立的任务管理空间。
- 任务数据隔离：每位用户只能管理自己的任务，无法查看或操作他人任务。
- 简洁易用：参考 Notion 风格，提供直观的任务管理界面和便捷操作。
- 高效提醒：任务到期自动提醒（浏览器通知/Windows通知），避免遗漏。
- 轻量部署与维护：适合小团队或个人使用，快速开发、低成本维护。
  

---

2. 功能需求

2.1 用户管理
- 用户注册、登录、登出：
  - 注册时需提供用户名和密码，邮箱为可选字段。
  - 登录后仅可访问个人任务数据。
- 用户信息字段：
  - 用户名（必填，唯一）
  - 密码（必填，需加密存储）
  - 邮箱（选填）
  - 头像（选填）
  - 创建时间（系统生成）
    
2.2 任务管理
- 任务基本操作：支持任务创建、查看、编辑、删除。
- 任务字段设计：
  - 标题：任务名称，必填。
  - 描述：支持 Markdown 格式，记录详情，选填。
  - 截止时间：日期+时间选择器，必填。
  - 优先级：高/中/低（下拉菜单）。
  - 状态：待办/进行中/已完成（可自定义）。
  - 创建时间：自动记录，系统生成。
  - 通知状态：是否已提醒（系统内部字段）。
- 任务视图：
  - 列表视图：表格形式，显示标题、截止时间、优先级、状态，支持排序和过滤。
  - 看板视图：按任务状态分组（待办/进行中/已完成），支持拖拽更改状态。
- 任务管理规则：
  - 每位用户只能管理自己的任务。
  - 系统根据登录用户自动过滤任务数据，防止数据越权。
    
2.3 提醒功能
- 触发条件：
  - 任务状态为“待办”或“进行中”。
  - 截止时间在当前时间到未来 x 分钟内（支持自定义，默认 30 分钟）。
- 提醒方式：
  - 浏览器弹窗提醒：
    - 显示位置：浏览器右下角。
    - 内容：任务标题、截止时间、简短描述。
    - 交互：点击跳转任务详情页，支持推迟提醒。
  - Windows通知（选做）：
    - 显示位置：Windows通知中心。
    - 内容：任务标题和截止时间。
    - 交互：点击打开任务详情页。
- 防重复提醒：
  - 使用通知状态字段记录已提醒任务，避免重复弹窗。
- 个性化设置：
  - 每位用户可配置提醒时间提前量（如 15 分钟、30 分钟、1 小时）。
    
2.4 设置与数据管理
- 设置功能：
  - 提醒时间提前量设置。
  - 数据导出：支持导出个人任务数据（CSV/JSON）。
- 数据备份：
  - 支持定期备份任务数据库（系统级）。
    

---

3. 交互设计

3.1 页面结构
- 登录/注册页：
  - 用户名和密码输入框，注册时可选填邮箱。
- 任务主页：
  - 表格视图：显示任务标题、截止时间、优先级、状态。
  - 看板视图：按任务状态分组，支持拖拽操作。
- 任务详情页：
  - 显示任务标题、描述、截止时间、优先级、状态。
  - 编辑模式：通过弹窗或侧边栏修改任务内容。
- 设置页：
  - 提醒时间设置。
  - 数据导出按钮。
- 通知弹窗：
  - 浏览器右下角弹窗，显示任务到期信息。
    
3.2 风格与体验
- 界面风格：
  - 参考 Notion 极简设计，白色/浅灰背景，圆角按钮。
  - 优先级颜色：高（红色）、中（黄色）、低（绿色）。
  - 状态颜色：待办（灰色）、进行中（蓝色）、已完成（绿色）。
- 动画效果：
  - 页面切换、弹窗淡入淡出。
  - 看板拖拽任务时，状态变更动画。
- 响应式设计：
  - 适配桌面和移动端浏览器。
    
3.3 操作细节
- 任务表格/看板支持点击修改、拖拽变更状态
- 支持快捷键（如Enter提交、Esc关闭弹窗）
- 通知弹窗5-10秒自动消失，可点击跳转
- 所有数据操作均需用户登录，严格校验用户身份
  

---

3.4 流程图设计

3.4.1 用户流程总览

```Plain Text
flowchart TD
    A[进入系统] --> B{已注册?}
    B -- 否 --> C[注册新账号]
    B -- 是 --> D[登录]
    C --> D
    D --> E[进入任务主页]
    E --> F{查看任务}
    F --> G[新建任务]
    F --> H[编辑/删除任务]
    F --> I[切换任务视图]
    F --> J[设置提醒参数]
    F --> K[数据导出]
    G --> E
    H --> E
    I --> E
    J --> E
    K --> E```

3.4.2 任务管理流程

```Plain Text
flowchart TD
    A[任务主页] --> B[点击新建任务]
    B --> C[填写任务信息]
    C --> D{信息完整?}
    D -- 否 --> C
    D -- 是 --> E[提交任务]
    E --> F[任务列表刷新]
    F --> G[任务显示在列表/看板]
    G --> H[可编辑/删除/切换状态]```

3.4.3 到期提醒流程

```Plain Text
flowchart TD
    A[定时检测任务] --> B{有到期任务?}
    B -- 否 --> C[等待下一次检测]
    B -- 是 --> D[触发通知弹窗]
    D --> E{用户点击通知?}
    E -- 是 --> F[跳转任务详情页]
    E -- 否 --> G{选择稍后提醒?}
    G -- 是 --> H[推迟提醒10分钟]
    G -- 否 --> I[通知自动消失]```

3.4.4 用户设置与数据导出流程

```Plain Text
flowchart TD
    A[任务主页] --> B[进入设置页]
    B --> C[修改提醒参数]
    B --> D[点击导出数据]
    D --> E[选择导出格式]
    E --> F[下载任务数据]```


---

4. 技术方案

4.1 前端
- Vue3：构建响应式界面，支持组件化开发。
- Vite：开发工具，支持快速热更新。
- Element Plus：组件库，用于表格、表单、弹窗等交互组件。
- Pinia：状态管理，存储用户和任务数据。
- Axios：前端与后端通信。
  
4.2 后端
- FastAPI：高性能异步框架，提供RESTful API服务。
- DuckDB：嵌入式数据库，单文件存储任务和用户数据。
- JWT认证：用户登录后的身份验证。
  
4.3 数据库设计
users表
- id (int, PK)
- username (varchar, unique)
- password_hash (varchar, 加密存储)
- email (varchar, 可选)
- avatar (varchar, 可选)
- created_at (timestamp)
  
tasks表
- id (int, PK)
- user_id (int, FK，关联users)
- title (varchar)
- description (text)
- due_date (timestamp)
- priority (int, 1=高/2=中/3=低)
- status (varchar)
- created_at (timestamp)
- notified (boolean)
  

---

5. 非功能需求

- 性能：
  - 支持 5-50 用户，每人每日 10-50 条任务。
  - API响应时间 < 200ms。
  - 通知延迟 < 1分钟。
- 安全性：
  - 数据隔离：严格校验用户身份，确保任务数据隔离。
  - 密码加密存储，防止泄露。
  - HTTPS传输，防止网络窃听。
- 可维护性：
  - Docker化部署，易于维护和扩展。
    

---

6. 风险与对策

- 数据隔离风险：
  - 后端所有接口均校验user_id，确保任务数据隔离。
- 通知权限被拒绝：
  - 提示用户授权通知权限，后续可支持邮件提醒作为备选方案。
- 浏览器关闭通知失效：
  - 鼓励安装PWA应用或使用桌面客户端。
- 数据库扩展性：
  - 如DuckDB无法满足并发需求，可迁移至Postgres。
    

---

7. 后续扩展

- 功能扩展：
  - 统计分析：任务完成率、优先级分布等。
  - 更多通知方式：邮件、微信、钉钉。
  - 用户个性化设置：主题颜色、界面布局。
- 平台扩展：
  - 移动端原生App。
  - 桌面客户端。
- 权限管理：
  - 增加管理员角色，支持用户管理。
    

---

8. 开发计划（MVP）

阶段1：基础功能（1-2周）
- 用户注册、登录、登出。
- 任务管理：列表视图、任务CRUD。
- 浏览器弹窗提醒。
  
阶段2：扩展功能（2-3周）
- 看板视图。
- 提醒时间设置。
- 数据导出功能。
- PWA支持。
  
阶段3：后续优化与测试（1周）
- 性能优化。
- 单元测试、集成测试。
- 部署与备份验证。
  

---

9. 总结

本系统为多用户、数据隔离的个人任务管理工具，主打极简易用、安全隔离和高效提醒，适合小团队和家庭成员独立使用场景。其架构设计支持快速迭代，可根据需求扩展协作功能和平台支持。